<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
    
    <script src="https://code.jquery.com/jquery.min.js"></script>
    
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/animate.css" />
    <title>이런 피부</title>
    
    <!-- <script type="text/javascript" src="https://maps.google.com/maps/api/js?libraries=places&key=AIzaSyCgditUqCY5DWs6mAV_E12beuVaa1FISWg"></script> -->
    <script type="text/javascript" src="https://www.gstatic.com/firebasejs/live/3.1/firebase.js"></script>   
	<script type="text/javascript" src="https://www.gstatic.com/firebasejs/4.1.2/firebase.js"></script>
    <script type="text/javascript" src="cordova.js"></script>

    <script type="text/javascript">
    
    	try{
    		
    	var networkState = navigator.connection.type;
    	var states = {};
    	
    	}catch(e){
    		alert(e.message);
    	}
    	
        window.setTimeout(numnum, 1000);
        
        function numnum(){
        	
       		try
       		{
       			
       		    states[Connection.UNKNOWN]  = 'Unknown connection';
       		    states[Connection.ETHERNET] = 'Ethernet connection';
       		    states[Connection.WIFI]     = 'WiFi connection';
       		    states[Connection.CELL_2G]  = 'Cell 2G connection';
       		    states[Connection.CELL_3G]  = 'Cell 3G connection';
       		    states[Connection.CELL_4G]  = 'Cell 4G connection';
       		    states[Connection.CELL]     = 'Cell generic connection';
       		    states[Connection.NONE]     = 'No network connection';
       		    
       		    
       		    
       			if(states[networkState] == 'No network connection'){
       				alert("네트워크 상태를 확인해주세요");
       				navigator.app.exitApp();
       			}
       			
       			window.FirebasePlugin.getToken(function(token) {
       			    // save this server-side and use it to push notifications to this device
       				localStorage.setItem('myToken', token);
       				console.log(token);
       			}, function(error) {
       			    alert(error);
       			});

       		}
       		catch(e)
       		{
       			alert(e.message);
       		}
       		
        	if(navigator.geolocation){
        		navigator.geolocation.getCurrentPosition(success, fail);
        	}else{
        		alert("위치정보를 가져올 수 없는 기기입니다.");
        	}
       		
        }
        
    	function success()
        {
        	window.location.href="weather/frmWeather.html";
        	//$.mobile.changePage("weather/frmWeather.html",{transition:"pop"});
        }
    	
    	function fail()
        {
    		console.log("실패");
        	window.location.href="weather/frmWeather.html";
        	//$.mobile.changePage("weather/frmWeather.html",{transition:"pop"});
        }
    </script>
</head>

<body>

<div data-role="page">
	<div style="
		position:fixed;
		top:50%;
		left:50%;
		margin-top:-108px;
		margin-left:-108px;		
		width:216px;
		height:216px;
		"  id="loadIMG" ><img src="img/loading.gif" width="100%"></div> 
</div>

</body>

</html>
